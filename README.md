# üöÄ Vetra AI - Smart Calendar Assistant

**Vetra AI** ‚Äî —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Telegram –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ Google Calendar –Ω–∞ –æ—Å–Ω–æ–≤–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

Vetra AI –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞–≤ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ –≤ Telegram. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –¥–∞—Ç—É, –≤—Ä–µ–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –∏ —Å–æ–∑–¥–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å –≤ Google Calendar –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### üéØ –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è
- **–§—Ä–∏–ª–∞–Ω—Å–µ—Ä—ã** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –≤—Å—Ç—Ä–µ—á–∞–º–∏ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- **–°—Ç—É–¥–µ–Ω—Ç—ã** - –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–µ–±—ã, –¥–µ–¥–ª–∞–π–Ω–æ–≤ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π  
- **–£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∏** - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–≤–æ–Ω–∫–æ–≤
- **–ó–∞–Ω—è—Ç—ã–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—ã** - –±—ã—Å—Ç—Ä–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TD
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ Telegram] --> B[Telegram Bot API]
    B --> C[Main.py - –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
    C --> D[Authentication Manager]
    C --> E[Event Parser System]
    C --> F[Google Calendar API]
    
    D --> D1[OAuth2 Flow]
    D --> D2[Token Management]
    D --> D3[User Session Storage]
    
    E --> E1[GPT Fine-tuned Parser]
    E --> E2[Rule-based Parser]
    E --> E3[Natural Language Processing]
    
    F --> F1[Event Creation]
    F --> F2[Calendar Integration]
    F --> F3[Timezone Handling]
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### **Backend Framework**
- **Python 3.13** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **python-telegram-bot v20.8** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API
- **asyncio** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### **–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π**

#### 1. **GPT Fine-tuned Parser (–û—Å–Ω–æ–≤–Ω–æ–π)**
- **OpenAI GPT-3.5-turbo** - fine-tuned –º–æ–¥–µ–ª—å –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π
- **–ú–æ–¥–µ–ª—å:** `ft:gpt-3.5-turbo-1106:personal:vetra-v1:Bg4yxDhd`
- **Job ID:** `ftjob-U1DT473QFwJvUAf7hokUd0V0`
- **–¢–æ—á–Ω–æ—Å—Ç—å:** ~95% —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏:** –†—É—Å—Å–∫–∏–π, –ê–Ω–≥–ª–∏–π—Å–∫–∏–π
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞—Ç (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö)
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (12/24 —á–∞—Å–æ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç)
  - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π (–≤—Å—Ç—Ä–µ—á–∞, –∑–≤–æ–Ω–æ–∫, —Ä–∞–±–æ—Ç–∞, etc.)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ ("—Å 14:00 –¥–æ 16:00")
  - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

#### 2. **Rule-based Parser (Fallback)**
- **Regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã** –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏ –¥–∞—Ç
- **dateparser** –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç
- **pytz** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –ë–∞–∑–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (–ß–ß:–ú–ú —Ñ–æ—Ä–º–∞—Ç)
  - –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ("–∑–∞–≤—Ç—Ä–∞", "–≤ –ø—è—Ç–Ω–∏—Ü—É", "—á–µ—Ä–µ–∑ —á–∞—Å")
  - –ü—Ä–æ—Å—Ç—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Å–æ–±—ã—Ç–∏–π

### **–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (OAuth2)**

#### **Ultra Fixed Authentication Manager**
- **Google OAuth2 Web Flow** - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Scope:** `https://www.googleapis.com/auth/calendar` 
- **Callback Server:** HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ OAuth redirect
- **Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º threading.Lock()
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π refresh —Ç–æ–∫–µ–Ω–æ–≤** –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏
- **Persistent storage** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

#### **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
```python
# –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã OAuth —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ ultra_fixed_auth.py     # –ì–ª–∞–≤–Ω–∞—è OAuth —Å–∏—Å—Ç–µ–º–∞
‚îú‚îÄ‚îÄ fixed_auth.py          # –ó–∞–ø–∞—Å–Ω–∞—è OAuth —Å–∏—Å—Ç–µ–º–∞  
‚îú‚îÄ‚îÄ credentials.json       # Google OAuth credentials
‚îú‚îÄ‚îÄ client_secret_*.json   # Google Client Secret
‚îî‚îÄ‚îÄ users/                 # –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤
```

### **Google Calendar Integration**
- **Google Calendar API v3** - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏
- **google-api-python-client** - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Google
- **google-auth-oauthlib** - OAuth2 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º timezone
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–±—ã—Ç–∏–π
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å primary calendar –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏—è

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤**
- **pytz** - —Ä–∞–±–æ—Ç–∞ —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏
- **datetime** - –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å –¥–∞—Ç–∞–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–µ–º
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** timezone –∏–∑ Google Calendar
- **Default timezone:** Asia/Almaty
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ DST** (Daylight Saving Time)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
vetra_ai_bot/
‚îú‚îÄ‚îÄ üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ main.py                    # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Telegram –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ç–æ–∫–µ–Ω—ã, –∫–ª—é—á–∏ API)
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt           # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ üîê –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ ultra_fixed_auth.py        # –û—Å–Ω–æ–≤–Ω–∞—è OAuth2 —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ fixed_auth.py             # –ó–∞–ø–∞—Å–Ω–∞—è OAuth2 —Å–∏—Å—Ç–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ credentials.json          # Google OAuth credentials
‚îÇ   ‚îî‚îÄ‚îÄ client_secret_*.json      # Google Client Secret
‚îÇ
‚îú‚îÄ‚îÄ ü§ñ –ü–∞—Ä—Å–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ gpt_parser.py             # GPT fine-tuned –ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ text_parser.py            # Rule-based –ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ datetime_utils.py         # –£—Ç–∏–ª–∏—Ç—ã —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ timezone_utils.py         # –£—Ç–∏–ª–∏—Ç—ã —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ üìÖ Google Calendar
‚îÇ   ‚îî‚îÄ‚îÄ gcal.py                   # –£—Ç–∏–ª–∏—Ç—ã Google Calendar API
‚îÇ
‚îú‚îÄ‚îÄ üìä –î–∞–Ω–Ω—ã–µ –∏ –ª–æ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ users/                    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–æ–∫–µ–Ω—ã –∏ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ vetra_dataset/           # –î–∞—Ç–∞—Å–µ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ vetra_ai.log            # –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îî‚îÄ‚îÄ venv/                   # Python –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞**
```python
# –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
TELEGRAM_TOKEN = "7966992541:AAEEnwqPtw9u7Fz-Z3pgE0WaMm89cW_ZsPM"
OPENAI_API_KEY = "sk-proj-GSs93n90ubA3n..."

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–æ–≤
parser = initialize_gpt_parser(OPENAI_API_KEY)  # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1
fallback_parser = RuleBasedWrapper()            # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OAuth —Å–∏—Å—Ç–µ–º—ã
auth_manager = UltraFixedAuthManager()
```

### 2. **–ü—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```mermaid
sequenceDiagram
    participant U as User
    participant T as Telegram Bot
    participant A as Auth Manager
    participant G as Google OAuth
    participant C as Callback Server
    
    U->>T: /start –∏–ª–∏ /auth
    T->>A: create_authorization_url(user_id)
    A->>C: –ó–∞–ø—É—Å–∫ HTTP callback —Å–µ—Ä–≤–µ—Ä–∞
    A->>G: –°–æ–∑–¥–∞–Ω–∏–µ OAuth URL
    G-->>A: Authorization URL + state
    A-->>T: URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    T-->>U: Inline –∫–Ω–æ–ø–∫–∞ —Å OAuth URL
    
    U->>G: –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –≤ –±—Ä–∞—É–∑–µ—Ä
    G->>U: –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ Google
    U->>G: –í–≤–æ–¥ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è + —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
    G->>C: Redirect —Å authorization code
    C->>A: handle_oauth_callback(state, code)
    A->>G: –û–±–º–µ–Ω code –Ω–∞ access_token
    G-->>A: Access token + refresh token
    A->>A: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ users/
    A-->>T: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    T-->>U: "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!"
```

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```python
# –ü—Ä–∏–º–µ—Ä: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–ª "–≤—Å—Ç—Ä–µ—á–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º –∑–∞–≤—Ç—Ä–∞ –≤ 14:00"

# –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
if not auth_manager.is_user_authorized(user_id):
    return "–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: /auth"

# –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
calendar_service = get_user_calendar_service(user_id)
user_timezone = get_user_timezone(user_id, calendar_service)

# –®–∞–≥ 3: –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–±—ã—Ç–∏—è
events = parser.extract_multiple_events(text, user_timezone)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: [(datetime(2025, 6, 12, 14, 0), "–≤—Å—Ç—Ä–µ—á–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º", "meeting")]

# –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
for start_dt, summary, event_type in events:
    end_dt = get_smart_end_time(start_dt, summary)  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    
    event = {
        'summary': summary,
        'start': {'dateTime': start_dt.isoformat(), 'timeZone': user_timezone},
        'end': {'dateTime': end_dt.isoformat(), 'timeZone': user_timezone},
        'description': f'‚ú® –°–æ–∑–¥–∞–Ω–æ —á–µ—Ä–µ–∑ Vetra AI'
    }
    
    result = calendar_service.events().insert(calendarId='primary', body=event).execute()

# –®–∞–≥ 5: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await update.message.reply_text(f"‚úÖ –°–æ–±—ã—Ç–∏–µ '{summary}' —Å–æ–∑–¥–∞–Ω–æ!")
```

### 4. **–£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏—è**
```python
def get_smart_end_time(start_time, summary):
    summary_lower = summary.lower()
    
    # –ö–æ—Ä–æ—Ç–∫–∏–µ —Å–æ–±—ã—Ç–∏—è (30 –º–∏–Ω—É—Ç)
    if any(word in summary_lower for word in ['–∑–≤–æ–Ω–æ–∫', '—Å–æ–∑–≤–æ–Ω', 'call']):
        return start_time + timedelta(minutes=30)
    
    # –î–ª–∏–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (2 —á–∞—Å–∞)  
    if any(word in summary_lower for word in ['–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è', '—Å–µ–º–∏–Ω–∞—Ä', 'lecture']):
        return start_time + timedelta(hours=2)
    
    # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (1 —á–∞—Å)
    return start_time + timedelta(hours=1)
```

## üîç –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞

### **–ü—Ä–∏–º–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:**

#### **–ü—Ä–æ—Å—Ç—ã–µ —Å–æ–±—ã—Ç–∏—è:**
- `"–≤—Å—Ç—Ä–µ—á–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 14:00"` ‚Üí 12.06.2025 14:00-15:00
- `"call with client tomorrow at 2pm"` ‚Üí 12.06.2025 14:00-14:30
- `"–æ–±–µ–¥ –≤ –ø—è—Ç–Ω–∏—Ü—É –≤ 13:30"` ‚Üí 14.06.2025 13:30-14:00

#### **–°–æ–±—ã—Ç–∏—è —Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:**
- `"—Ä–∞–±–æ—Ç–∞ —Å 9:00 –¥–æ 17:00"` ‚Üí 11.06.2025 09:00-17:00
- `"–≤—Å—Ç—Ä–µ—á–∞ —Å 12:00 –¥–æ 14:00"` ‚Üí 11.06.2025 12:00-14:00
- `"conference from 10am to 6pm"` ‚Üí 11.06.2025 10:00-18:00

#### **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:**
- `"–≤—Å—Ç—Ä–µ—á–∞ –≤ 10:00, –æ–±–µ–¥ –≤ 13:00, —Å–æ–∑–≤–æ–Ω –≤ 16:00"`
  - –°–æ–±—ã—Ç–∏–µ 1: 11.06.2025 10:00-11:00 "–≤—Å—Ç—Ä–µ—á–∞"
  - –°–æ–±—ã—Ç–∏–µ 2: 11.06.2025 13:00-13:30 "–æ–±–µ–¥"  
  - –°–æ–±—ã—Ç–∏–µ 3: 11.06.2025 16:00-16:30 "—Å–æ–∑–≤–æ–Ω"

#### **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã:**
- `"–≤—Å—Ç—Ä–µ—á–∞ —á–µ—Ä–µ–∑ 2 –¥–Ω—è –≤ 15:00"` ‚Üí 13.06.2025 15:00-16:00
- `"–∑–≤–æ–Ω–æ–∫ –≤ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 11:00"` ‚Üí 16.06.2025 11:00-11:30
- `"presentation next Friday at 3pm"` ‚Üí 20.06.2025 15:00-17:00

### **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏:**
- **–†—É—Å—Å–∫–∏–π:** –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ + —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ê–Ω–≥–ª–∏–π—Å–∫–∏–π:** –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- **–°–º–µ—à–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:** "meeting –∑–∞–≤—Ç—Ä–∞ –≤ 2pm" ‚úÖ

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

### **config.py**
```python
# Telegram Bot Configuration
TELEGRAM_TOKEN = "7966992541:AAEEnwqPtw9u7Fz-Z3pgE0WaMm89cW_ZsPM"

# OpenAI GPT Configuration  
OPENAI_API_KEY = "sk-proj-GSs93n90ubA3n..."
GPT_MODEL_NAME = "ft:gpt-3.5-turbo-1106:personal:vetra-v1:Bg4yxDhd"
FALLBACK_MODEL = "gpt-3.5-turbo"

# Google OAuth Configuration (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ credentials.json)
GOOGLE_CLIENT_ID = "832185435204-mrsdif0lnortdd4gb0se6pctcpmkkav8.apps.googleusercontent.com"

# System Configuration
DEFAULT_TIMEZONE = "Asia/Almaty"
USERS_DIR = "users"
```

### **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º**
```python
# Beta —Ç–µ—Å—Ç–µ—Ä—ã (–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é)
BETA_USERS = {
    785966064,  # @Iskakov_Damir - –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
    # –î–æ–±–∞–≤–ª—è—é—Ç—Å—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
}

# –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Å–∏—Å—Ç–µ–º—ã
ADMIN_USERS = {
    785966064,  # –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ
}
```

## üö® **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è OAuth2**

### **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Google OAuth2 –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –∏–∑-–∑–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ **Python 3.13** —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π **python-telegram-bot v20.8**.

### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:**
```
AttributeError: 'Updater' object has no attribute '_Updater__polling_cleanup_cb' 
and no __dict__ for setting new attributes
```

**–ü—Ä–∏—á–∏–Ω–∞:** Python 3.13 –∏–∑–º–µ–Ω–∏–ª –º–æ–¥–µ–ª—å –æ–±—ä–µ–∫—Ç–æ–≤, –∑–∞–ø—Ä–µ—Ç–∏–≤ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫ –∫–ª–∞—Å—Å–∞–º. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ python-telegram-bot v20.8 –ø—ã—Ç–∞–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã –∫ –∫–ª–∞—Å—Å—É `Updater`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∫—Ä–∞—Ö—É —Å–∏—Å—Ç–µ–º—ã.

### **–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—Ç:**
- ‚ùå **–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è**
- ‚ùå **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–∫–µ–Ω—ã –º–æ–≥—É—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è**  
- ‚ùå **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ**
- ‚ùå **–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞**

### **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å –¥–ª—è –±–∏–∑–Ω–µ—Å–∞:**
üî• **–í–´–°–û–ö–ê–Ø** - –£ –Ω–∞—Å **–æ—á–µ–Ω—å —Å–∫–æ—Ä–æ** –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã **—Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**, —á—å–∏ email'—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ Google OAuth. **–ë–µ–∑ —Ä–∞–±–æ—á–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ:**
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä–∏ —Ç–µ—Å—Ç–µ—Ä–æ–≤
- –ü–æ–ª—É—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø—Ä–æ–¥—É–∫—Ç –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞–º/–ø–∞—Ä—Ç–Ω–µ—Ä–∞–º
- –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

## üîß –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

### **–í–∞—Ä–∏–∞–Ω—Ç 1: Downgrade Python** ‚≠ê **–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3.12 —á–µ—Ä–µ–∑ pyenv
pyenv install 3.12.0
pyenv local 3.12.0

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
rm -rf venv
python3.12 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```
**–ü–ª—é—Å—ã:** –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ  
**–ú–∏–Ω—É—Å—ã:** –û—Ç–∫–∞—Ç –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ Python

### **–í–∞—Ä–∏–∞–Ω—Ç 2: Upgrade python-telegram-bot**
```bash
pip install --upgrade python-telegram-bot
```
**–ü–ª—é—Å—ã:** –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏  
**–ú–∏–Ω—É—Å—ã:** –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞

### **–í–∞—Ä–∏–∞–Ω—Ç 3: Aggressive Python 3.13 Patch**
–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ monkey-patch –¥–ª—è –æ–±—Ö–æ–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Python 3.13:
```python
def aggressive_updater_patch():
    from telegram.ext import Updater
    # –ü–∞—Ç—á–∏–Ω–≥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∫–ª–∞—Å—Å–∞
    original_init = Updater.__init__
    def patched_init(self, *args, **kwargs):
        # –û–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Python 3.13
    Updater.__init__ = patched_init
```
**–ü–ª—é—Å—ã:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ Python 3.13  
**–ú–∏–Ω—É—Å—ã:** –•–∞–∫–µ—Ä—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–º

## üß™ –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### **–¢–µ–∫—É—â–∏–µ —Ç–µ—Å—Ç—ã:**
- ‚úÖ **–ü–∞—Ä—Å–µ—Ä —Å–æ–±—ã—Ç–∏–π** - unit —Ç–µ—Å—Ç—ã –¥–ª—è GPT –∏ rule-based –ø–∞—Ä—Å–µ—Ä–æ–≤
- ‚úÖ **Google Calendar API** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π  
- ‚ùå **OAuth2 Flow** - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∏–∑-–∑–∞ Python 3.13
- ‚úÖ **Timezone –æ–±—Ä–∞–±–æ—Ç–∫–∞** - —Ç–µ—Å—Ç—ã —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤
- ‚úÖ **Telegram Bot Commands** - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –∫–æ–º–∞–Ω–¥

### **–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:**
1. **Alpha —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫–æ–º–∞–Ω–¥–∞) - ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
2. **Beta —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (–ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏) - ‚è≥ **–ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û OAuth2**
3. **Public Beta** (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞) - ‚è≥ –û–∂–∏–¥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```python
# –í—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ vetra_ai.log
2025-06-11 08:57:17 - gpt_parser - INFO - ‚úÖ Event parsed: –≤—Å—Ç—Ä–µ—á–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 14:00
2025-06-11 08:57:18 - gcal - INFO - ‚úÖ Event created in Google Calendar
2025-06-11 08:57:19 - main - INFO - ‚úÖ User notification sent
```

### **–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞** (GPT vs Rule-based)
- **–í—Ä–µ–º—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** OAuth2 flow
- **–ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- **–¢–∏–ø—ã —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö —Å–æ–±—ã—Ç–∏–π**
- **–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üöÄ Deployment –∏ –∑–∞–ø—É—Å–∫

### **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository_url>
cd vetra_ai_bot

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ü–û–°–õ–ï –†–ï–®–ï–ù–ò–Ø –ü–†–û–ë–õ–ï–ú–´ PYTHON 3.13)
python3.12 -m venv venv  # –ò—Å–ø–æ–ª—å–∑—É–µ–º Python 3.12
source venv/bin/activate
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp config.example.py config.py
# –ó–∞–ø–æ–ª–Ω–∏—Ç—å TELEGRAM_TOKEN –∏ OPENAI_API_KEY

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google OAuth
# –ü–æ–º–µ—Å—Ç–∏—Ç—å credentials.json –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞

# –ó–∞–ø—É—Å–∫
python3 main.py
```

### **Production deployment:**
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —Å Python 3.12
- **Nginx reverse proxy** –¥–ª—è OAuth callback
- **Redis** –¥–ª—è —Å–µ—Å—Å–∏–π (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- **PostgreSQL** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **OAuth2 Security:**
- **PKCE Flow** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∞—Ç–∞–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞
- **State parameter** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç CSRF
- **Encrypted token storage** –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
- **Automatic token refresh** –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### **API Security:**
- **Rate limiting** –Ω–∞ Telegram Bot API
- **Input validation** –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **Error handling** –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **Secure logging** (—Ç–æ–∫–µ–Ω—ã –∏ –ø–∞—Ä–æ–ª–∏ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è)

## üéØ Roadmap –∏ –ø–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö–†–ò–¢–ò–ß–ù–û** 
- üî• **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã OAuth2** (Python 3.13 compatibility)
- üî• **–ó–∞–ø—É—Å–∫ beta —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
- üì± **–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (React Native)
- üåê **Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
- üîÑ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** —Å –¥—Ä—É–≥–∏–º–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- ü§ñ **–£–ª—É—á—à–µ–Ω–∏–µ GPT –º–æ–¥–µ–ª–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Advanced —Ñ—É–Ω–∫—Ü–∏–∏**
- üß† **AI-–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è** –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Å–æ–±—ã—Ç–∏–π
- üë• **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞** (shared calendars)
- üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏** –∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üîó **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å Zoom, Meet, Teams

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **–û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** @Iskakov_Damir (Telegram)
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** [support@vetra.ai](mailto:support@vetra.ai)
- **GitHub Issues:** [Issues page](https://github.com/vetra-ai/issues)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [docs.vetra.ai](https://docs.vetra.ai)

---

## ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–ê–ú

**–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Ä–µ—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ Python 3.13 —Å python-telegram-bot v20.8!**

–ë–µ–∑ —Ä–∞–±–æ—á–µ–π —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ OAuth2 –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –î–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ beta
- –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞–º
- –°–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python 3.12 –¥–æ –≤—ã—Ö–æ–¥–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π –≤–µ—Ä—Å–∏–∏ python-telegram-bot –¥–ª—è Python 3.13.
